<h1>Users List</h1>

<%= form_with url: admin_index_path, method: :get, class:"row g-3" do |f| %>
  <div class="col-auto">
    <%= f.label :search, "Name", class: "form-control-plaintext" %>
  </div>
  <div class="col-auto">
    <%= f.text_field :search, class:"form-control", value: params[:search] %>
  </div>
  <div class="col-auto">
    <%= f.submit "Search", :name => nil, class: "btn btn-primary" %>
  </div>
<% end %>
<br>

<% unless @users.empty? %>
  <table>
  <tr>
    <th>Name </th>
    <th>Email </th>
    <th>Phone No. </th>
    <th>Role </th>
    <th>
  </tr>
 <% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= user.phone_no %></td>
    <td><%= user.role %></td>
    <td>
      <% if user.status == 'active' %>
        <%= button_to "Nonaktifkan", admin_status_path(user.id), method: :patch, params: { status: 'nonactive', name: user.name }, class:"btn btn-outline-danger" %>
      <% else %>
        <%= button_to "Aktifkan", admin_status_path(user.id), method: :patch, params: { status: 'active', name: user.name }, class:"btn btn-outline-success" %>
      <% end %>
    </td>
  </tr>
  <% end %>
</table>
<% else %>
  <p>Tidak ada user yang sesuai</p>
<% end %>